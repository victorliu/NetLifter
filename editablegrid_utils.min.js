function LeapYear(a){if(a%100==0){if(a%400==0)return!0}else if(a%4==0)return!0;return!1}function get_html_translation_table(a,b){var c={},d={},e=0,f="",g={},h={},i={},j={};if(g[0]="HTML_SPECIALCHARS",g[1]="HTML_ENTITIES",h[0]="ENT_NOQUOTES",h[2]="ENT_COMPAT",h[3]="ENT_QUOTES",i=isNaN(a)?a?a.toUpperCase():"HTML_SPECIALCHARS":g[a],j=isNaN(b)?b?b.toUpperCase():"ENT_COMPAT":h[b],"HTML_SPECIALCHARS"!==i&&"HTML_ENTITIES"!==i)throw new Error("Table: "+i+" not supported");"HTML_ENTITIES"===i&&(c[160]="&nbsp;",c[161]="&iexcl;",c[162]="&cent;",c[163]="&pound;",c[164]="&curren;",c[165]="&yen;",c[166]="&brvbar;",c[167]="&sect;",c[168]="&uml;",c[169]="&copy;",c[170]="&ordf;",c[171]="&laquo;",c[172]="&not;",c[173]="&shy;",c[174]="&reg;",c[175]="&macr;",c[176]="&deg;",c[177]="&plusmn;",c[178]="&sup2;",c[179]="&sup3;",c[180]="&acute;",c[181]="&micro;",c[182]="&para;",c[183]="&middot;",c[184]="&cedil;",c[185]="&sup1;",c[186]="&ordm;",c[187]="&raquo;",c[188]="&frac14;",c[189]="&frac12;",c[190]="&frac34;",c[191]="&iquest;",c[192]="&Agrave;",c[193]="&Aacute;",c[194]="&Acirc;",c[195]="&Atilde;",c[196]="&Auml;",c[197]="&Aring;",c[198]="&AElig;",c[199]="&Ccedil;",c[200]="&Egrave;",c[201]="&Eacute;",c[202]="&Ecirc;",c[203]="&Euml;",c[204]="&Igrave;",c[205]="&Iacute;",c[206]="&Icirc;",c[207]="&Iuml;",c[208]="&ETH;",c[209]="&Ntilde;",c[210]="&Ograve;",c[211]="&Oacute;",c[212]="&Ocirc;",c[213]="&Otilde;",c[214]="&Ouml;",c[215]="&times;",c[216]="&Oslash;",c[217]="&Ugrave;",c[218]="&Uacute;",c[219]="&Ucirc;",c[220]="&Uuml;",c[221]="&Yacute;",c[222]="&THORN;",c[223]="&szlig;",c[224]="&agrave;",c[225]="&aacute;",c[226]="&acirc;",c[227]="&atilde;",c[228]="&auml;",c[229]="&aring;",c[230]="&aelig;",c[231]="&ccedil;",c[232]="&egrave;",c[233]="&eacute;",c[234]="&ecirc;",c[235]="&euml;",c[236]="&igrave;",c[237]="&iacute;",c[238]="&icirc;",c[239]="&iuml;",c[240]="&eth;",c[241]="&ntilde;",c[242]="&ograve;",c[243]="&oacute;",c[244]="&ocirc;",c[245]="&otilde;",c[246]="&ouml;",c[247]="&divide;",c[248]="&oslash;",c[249]="&ugrave;",c[250]="&uacute;",c[251]="&ucirc;",c[252]="&uuml;",c[253]="&yacute;",c[254]="&thorn;",c[255]="&yuml;"),"ENT_NOQUOTES"!==j&&(c[34]="&quot;"),"ENT_QUOTES"===j&&(c[39]="&#39;"),c[60]="&lt;",c[62]="&gt;";for(e in c)f=String.fromCharCode(e),d[f]=c[e];return d}function htmlentities(a,b){var c={},d="",e="";if(e=a.toString(),!1===(c=this.get_html_translation_table("HTML_ENTITIES",b)))return!1;e=e.split("&").join("&amp;"),c["'"]="&#039;";for(d in c)e=e.split(d).join(c[d]);return e}function htmlspecialchars(a,b){var c={},d="",e="";if(e=a.toString(),!1===(c=this.get_html_translation_table("HTML_SPECIALCHARS",b)))return!1;e=e.split("&").join("&amp;");for(d in c)e=e.split(d).join(c[d]);return e}function number_format(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+a)?+a:0,f=isFinite(+b)?b:0,g="undefined"==typeof d?",":d,h="undefined"==typeof c?".":c,i="",j=function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c};return i=(f<0?""+e:f?j(e,f):""+Math.round(e)).split("."),i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=new Array(f-i[1].length+1).join("0")),i.join(h)}EditableGrid.prototype._convertOptions=function(a){if(null!==a&&!(a instanceof Array)&&"object"==typeof a){var b=[];for(var c in a)"object"==typeof a[c]?b.push({label:c,values:this._convertOptions(a[c])}):b.push({value:c,label:a[c]});a=b}return a},EditableGrid.prototype.setCookie=function(a,b,c){var d=new Date;d.setDate(d.getDate()+c);var e=escape(b)+(null==c?"":"; expires="+d.toUTCString());document.cookie=a+"="+e},EditableGrid.prototype.getCookie=function(a){for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].substr(0,b[c].indexOf("=")),e=b[c].substr(b[c].indexOf("=")+1);if(d=d.replace(/^\s+|\s+$/g,""),d==a)return unescape(e)}return null},EditableGrid.prototype.has_local_storage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},EditableGrid.prototype._localset=function(a,b){this.has_local_storage()?localStorage.setItem(a,b):this.setCookie(a,b,null)},EditableGrid.prototype._localunset=function(a){this.has_local_storage()?localStorage.removeItem(a):this.setCookie(a,null,null)},EditableGrid.prototype._localget=function(a){return this.has_local_storage()?localStorage.getItem(a):this.getCookie(a)},EditableGrid.prototype._localisset=function(a){return this.has_local_storage()?null!==localStorage.getItem(a)&&"undefined"!=localStorage.getItem(a):null!==this.getCookie(a)},EditableGrid.prototype.localset=function(a,b){if(this.enableStore)return this._localset(this.name+"_"+a,b)},EditableGrid.prototype.localunset=function(a){if(this.enableStore)return this._localunset(this.name+"_"+a,value)},EditableGrid.prototype.localget=function(a){return this.enableStore?this._localget(this.name+"_"+a):null},EditableGrid.prototype.localisset=function(a){return!!this.enableStore&&null!==this._localget(this.name+"_"+a)},EditableGrid.prototype.unsort=function(a,b){return aa=isNaN(a[2])?0:parseFloat(a[2]),bb=isNaN(b[2])?0:parseFloat(b[2]),aa-bb},EditableGrid.prototype.sort_stable=function(a,b){return function(c,d){var e=b?a(d,c):a(c,d);return 0!=e?e:EditableGrid.prototype.unsort(c,d)}},EditableGrid.prototype.sort_numeric=function(a,b){return aa=isNaN(parseFloat(a[0]))?0:parseFloat(a[0]),bb=isNaN(parseFloat(b[0]))?0:parseFloat(b[0]),aa-bb},EditableGrid.prototype.sort_boolean=function(a,b){return aa=a[0]&&"false"!=a[0]?1:0,bb=b[0]&&"false"!=b[0]?1:0,aa-bb},EditableGrid.prototype.sort_alpha=function(a,b){return a[0]||b[0]?a[0]&&!b[0]?1:!a[0]&&b[0]?-1:a[0].toLowerCase()==b[0].toLowerCase()?0:a[0].toLowerCase().localeCompare(b[0].toLowerCase()):0},EditableGrid.prototype.sort_date=function(a,b){return date=EditableGrid.prototype.checkDate(a[0]),aa="object"==typeof date?date.sortDate:0,date=EditableGrid.prototype.checkDate(b[0]),bb="object"==typeof date?date.sortDate:0,aa-bb},EditableGrid.prototype.getStyle=function(a,b,c){return c=c||b,a.currentStyle?a.currentStyle[b]:window.getComputedStyle?document.defaultView.getComputedStyle(a,null).getPropertyValue(c):a.style[b]},EditableGrid.prototype.isStatic=function(a){var b=this.getStyle(a,"position");return!b||"static"==b},EditableGrid.prototype.verticalAlign=function(a){return this.getStyle(a,"verticalAlign","vertical-align")},EditableGrid.prototype.paddingLeft=function(a){var b=parseInt(this.getStyle(a,"paddingLeft","padding-left"));return isNaN(b)?0:Math.max(0,b)},EditableGrid.prototype.paddingRight=function(a){var b=parseInt(this.getStyle(a,"paddingRight","padding-right"));return isNaN(b)?0:Math.max(0,b)},EditableGrid.prototype.paddingTop=function(a){var b=parseInt(this.getStyle(a,"paddingTop","padding-top"));return isNaN(b)?0:Math.max(0,b)},EditableGrid.prototype.paddingBottom=function(a){var b=parseInt(this.getStyle(a,"paddingBottom","padding-bottom"));return isNaN(b)?0:Math.max(0,b)},EditableGrid.prototype.borderLeft=function(a){var b=parseInt(this.getStyle(a,"borderRightWidth","border-right-width")),c=parseInt(this.getStyle(a,"borderLeftWidth","border-left-width"));return b=isNaN(b)?0:b,c=isNaN(c)?0:c,Math.max(b,c)},EditableGrid.prototype.borderRight=function(a){return this.borderLeft(a)},EditableGrid.prototype.borderTop=function(a){var b=parseInt(this.getStyle(a,"borderTopWidth","border-top-width")),c=parseInt(this.getStyle(a,"borderBottomWidth","border-bottom-width"));return b=isNaN(b)?0:b,c=isNaN(c)?0:c,Math.max(b,c)},EditableGrid.prototype.borderBottom=function(a){return this.borderTop(a)},EditableGrid.prototype.autoWidth=function(a){return a.offsetWidth-this.paddingLeft(a)-this.paddingRight(a)-this.borderLeft(a)-this.borderRight(a)},EditableGrid.prototype.autoHeight=function(a){return a.offsetHeight-this.paddingTop(a)-this.paddingBottom(a)-this.borderTop(a)-this.borderBottom(a)},EditableGrid.prototype.detectDir=function(){for(var a=location.href,b=document.getElementsByTagName("base"),c=0;c<b.length;c++)b[c].href&&(a=b[c].href);b=document.getElementsByTagName("script");for(var c=0;c<b.length;c++)if(b[c].src&&/(^|\/)editablegrid[^\/]*\.js([?#].*)?$/i.test(b[c].src)){var d=new URI(b[c].src),e=d.toAbsolute(a);return e.path=e.path.replace(/[^\/]+$/,""),e.path=e.path.replace(/\/$/,""),delete e.query,delete e.fragment,e.toString()}return!1},EditableGrid.prototype.isSame=function(a,b){return a===b||(!("number"!=typeof a||!isNaN(a)||"number"!=typeof b||!isNaN(b))||(""===a&&null===b||""===b&&null===a))},EditableGrid.prototype.strip=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},EditableGrid.prototype.hasClassName=function(a,b){return a.className.length>0&&(a.className==b||new RegExp("(^|\\s)"+b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+"(\\s|$)").test(a.className))},EditableGrid.prototype.addClassName=function(a,b){this.hasClassName(a,b)||(a.className+=(a.className?" ":"")+b)},EditableGrid.prototype.removeClassName=function(a,b){a.className=this.strip(a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," "))},String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")},String.prototype.contains=function(a){return this.match(a)==a},String.prototype.startsWith=function(a){return this.match("^"+a)==a},String.prototype.endsWith=function(a){return this.match(a+"$")==a},EditableGrid.prototype.checkDate=function(a,b){b=b||this.dateFormat,b=b||"EU";var c,d,e,f,g,h,j,m,k=!1,l=new Array("-"," ","/","."),o=this.shortMonthNames;if(o=o||["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],!a||a.length<1)return 0;for(m=0;m<l.length;m++)if(a.indexOf(l[m])!=-1){if(c=a.split(l[m]),3!=c.length)return 1;d=c[0],e=c[1],f=c[2],k=!0}if(0==k){if(a.length<=5)return 1;d=a.substr(0,2),e=a.substr(2,2),f=a.substr(4)}if("US"==b&&(strTemp=d,d=e,e=strTemp),g=parseInt(d,10),isNaN(g))return 2;if(h=parseInt(e,10),isNaN(h)){for(i=0;i<12;i++)e.toUpperCase()==o[i].toUpperCase()&&(h=i+1,e=o[i],i=12);if(isNaN(h))return 3}if(h>12||h<1)return 5;if(j=parseInt(f,10),isNaN(j))return 4;if(j<70&&(j=2e3+j,f=""+j),j<100&&(j=1900+j,f=""+j),j<1900||j>2100)return 11;if((1==h||3==h||5==h||7==h||8==h||10==h||12==h)&&(g>31||g<1))return 6;if((4==h||6==h||9==h||11==h)&&(g>30||g<1))return 7;if(2==h){if(g<1)return 8;if(1==LeapYear(j)){if(g>29)return 9}else if(g>28)return 10}return{formattedDate:"US"==b?o[h-1]+" "+g+" "+f:g+" "+o[h-1]+" "+f,sortDate:Date.parse(h+"/"+g+"/"+j),dbDate:j+"-"+h+"-"+g}},URI=function(a){function b(a){for(var b="";a;)if("../"==a.substr(0,3)||"./"==a.substr(0,2))a=a.replace(/^\.+/,"").substr(1);else if("/./"==a.substr(0,3)||"/."==a)a="/"+a.substr(3);else if("/../"==a.substr(0,4)||"/.."==a)a="/"+a.substr(4),b=b.replace(/\/?[^\/]*$/,"");else if("."==a||".."==a)a="";else{var c=a.match(/^\/?[^\/]*/)[0];a=a.substr(c.length),b+=c}return b}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(a){var b=a.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=b[3]?b[2]:null,this.authority=b[5]?b[6]:null,this.path=b[7],this.query=b[9]?b[10]:null,this.fragment=b[12]?b[13]:null,this},this.toString=function(){var a="";return null!=this.scheme&&(a=a+this.scheme+":"),null!=this.authority&&(a=a+"//"+this.authority),null!=this.path&&(a+=this.path),null!=this.query&&(a=a+"?"+this.query),null!=this.fragment&&(a=a+"#"+this.fragment),a},this.toAbsolute=function(a){var a=new URI(a),c=this,d=new URI;return null!=a.scheme&&(null!=c.scheme&&c.scheme.toLowerCase()==a.scheme.toLowerCase()&&(c.scheme=null),null!=c.scheme?(d.scheme=c.scheme,d.authority=c.authority,d.path=b(c.path),d.query=c.query):(null!=c.authority?(d.authority=c.authority,d.path=b(c.path),d.query=c.query):(""==c.path?(d.path=a.path,null!=c.query?d.query=c.query:d.query=a.query):("/"==c.path.substr(0,1)?d.path=b(c.path):(null!=a.authority&&""==a.path?d.path="/"+c.path:d.path=a.path.replace(/[^\/]+$/,"")+c.path,d.path=b(d.path)),d.query=c.query),d.authority=a.authority),d.scheme=a.scheme),d.fragment=c.fragment,d)},a&&this.parse(a)};
